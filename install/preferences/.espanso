#!/usr/bin/env bash

###############################################################################
# espanso - text expander https://espanso.org/
###############################################################################

# If a command fails, bash exits instead of continuing with the rest of the script
set -o errexit

# Get the dotfiles directory (go up two levels from install/preferences/)
if [[ -z "$DOTFILES_DIR" ]]; then
    SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
    DOTFILES_DIR="$(cd "$SCRIPT_DIR/../.." && pwd)"
fi

source=$DOTFILES_DIR/applications/espanso

target=$HOME/Library/Application\ Support/espanso  

echo "Espanso: Linking config files"
if [[ -d "$source" ]] ; then
    echo "Espanso: Remove folder"
    [[ -d "$target" ]] && rm -rf "$target"
    ln -s "$source" "$target"
fi